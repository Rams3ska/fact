{"version":3,"sources":["components/Loader.jsx","components/SelectsView.jsx","heplers/customFuncs/flat.js","heplers/customFuncs/splitToPrimitives.js","heplers/customFuncs/map.js","heplers/customFuncs/filter.js","heplers/customFuncs/includes.js","App.js","index.js"],"names":["Loader","className","Selectsview","props","selects","length","map","x","i","flat","array","result","doFlat","arr","elem","Array","isArray","splitToPrimitives","stringify","tempObj","el","hasOwnProperty","JSON","callbackfn","entries","idx","filter","includes","element","fromIndex","Error","initialState","isFetchLoading","isFetchError","dataList","selectedItems","currentState","stateHistory","App","useState","state","setState","fetchData","prev","axios","get","then","resp","data","processedData","catch","reason","errMsg","response","pushStateChanges","newHistory","dateOfChange","Date","toJSON","slice","replace","dateChange","useEffect","multiple","name","id","size","value","v","_","a","onChange","e","target","selectedOptions","onClick","current","undefined","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b8263f40.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nimport '../assets/styles/Loader.css';\r\n\r\nexport default function Loader() {\r\n\treturn (\r\n\t\t<div className=\"lds-ring\">\r\n\t\t\t<div></div>\r\n\t\t\t<div></div>\r\n\t\t\t<div></div>\r\n\t\t\t<div></div>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\n\r\nimport '../assets/styles/SelectsView.scss';\r\n\r\nexport default function Selectsview(props) {\r\n\tconst { selects = [] } = props;\r\n\r\n\treturn (\r\n\t\t<div className=\"select-list island card\">\r\n\t\t\t<h1>Список выбранных элементов</h1>\r\n\t\t\t{!selects.length && <h2>Пусто</h2>}\r\n\t\t\t<ul>\r\n\t\t\t\t{selects.map((x, i) => (\r\n\t\t\t\t\t<li key={i}>{`> ${x}`}</li>\r\n\t\t\t\t))}\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t);\r\n}\r\n","const flat = (array) => {\r\n\tlet result = [];\r\n\r\n\t(function doFlat(arr) {\r\n\t\tfor (const elem of arr) {\r\n\t\t\tArray.isArray(elem) ? doFlat(elem) : (result = [...result, elem]);\r\n\t\t}\r\n\t})(array);\r\n\r\n\treturn result;\r\n};\r\n\r\nexport default flat;\r\n","const splitToPrimitives = (array, stringify = false) => {\r\n\tlet result = [];\r\n\tconst tempObj = {};\r\n\r\n\tfor (const el of array) {\r\n\t\tif (el === null) {\r\n\t\t\t!tempObj.hasOwnProperty('null') && (tempObj['null'] = []);\r\n\t\t\ttempObj['null'] = [...tempObj['null'], stringify ? JSON.stringify(el) : el];\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\t!tempObj.hasOwnProperty(typeof el) && (tempObj[typeof el] = []);\r\n\t\ttempObj[typeof el] = [...tempObj[typeof el], stringify ? JSON.stringify(el) : el];\r\n\t}\r\n\r\n\tfor (const el in tempObj) {\r\n\t\tresult = [...result, tempObj[el]];\r\n\t}\r\n\r\n\treturn result;\r\n};\r\n\r\nexport default splitToPrimitives;\r\n","const map = (array, callbackfn) => {\r\n\tlet result = [];\r\n\r\n\tfor (const [idx, el] of array.entries()) {\r\n\t\tresult = [...result, callbackfn(el, idx, array)];\r\n\t}\r\n\r\n\treturn result;\r\n};\r\n\r\nexport default map;\r\n","const filter = (array, callbackfn) => {\r\n\tlet result = [];\r\n\r\n\tfor (const [idx, el] of array.entries()) {\r\n\t\tcallbackfn(el, idx, array) && (result = [...result, el]);\r\n\t}\r\n\r\n\treturn result;\r\n};\r\n\r\nexport default filter;\r\n","const includes = (array, element, fromIndex = 0) => {\r\n\tif (fromIndex < 0) throw Error('The index cannot be less than zero');\r\n\r\n\tfor (let i = fromIndex; i < array.length; i++) {\r\n\t\tif (array[i] === element) return true;\r\n\t}\r\n\r\n\treturn false;\r\n};\r\n\r\nexport default includes;\r\n","import { Fragment, useEffect, useState } from 'react';\n\nimport axios from 'axios';\n\nimport { Loader, SelectsView } from './components';\n\nimport { flat, splitToPrimitives, map, filter, includes } from './heplers/customFuncs';\n\nimport './assets/styles/App.scss';\n\nconst initialState = {\n\tisFetchLoading: true,\n\tisFetchError: '',\n\tdataList: [],\n\tselectedItems: [],\n\tcurrentState: 0,\n};\n\nconst MAX_HISTORY_LENGHT = 10;\n\nlet stateHistory = [];\n\nfunction App() {\n\tconst [state, setState] = useState(initialState);\n\n\tconst fetchData = () => {\n\t\tsetState((prev) => ({ ...prev, isFetchLoading: true }));\n\n\t\taxios\n\t\t\t.get('https://raw.githubusercontent.com/WilliamRu/TestAPI/master/db.json')\n\t\t\t.then((resp) => {\n\t\t\t\tconst data = resp.data['testArr'];\n\n\t\t\t\tconst processedData = splitToPrimitives(flat(data), true);\n\n\t\t\t\tsetState((prev) => ({ ...prev, dataList: processedData, isFetchLoading: false }));\n\t\t\t})\n\t\t\t.catch((reason) => {\n\t\t\t\tconst errMsg = `Ошибка: не удалось загрузить данные с сервера (${reason.response.data})`;\n\n\t\t\t\tsetState((prev) => ({ ...prev, isFetchError: errMsg, isFetchLoading: false }));\n\t\t\t});\n\t};\n\n\tconst handleSelect = (e) => {\n\t\tconst { target } = e;\n\n\t\tsetState((prev) => ({ ...prev, selectedItems: map([...target.selectedOptions], (v) => v.value) }));\n\n\t\tpushStateChanges();\n\t};\n\n\tconst pushStateChanges = () => {\n\t\tlet newHistory = [];\n\n\t\tconst dateOfChange = new Date().toJSON().slice(0, 19).replace('T', ' ');\n\n\t\tif (stateHistory.length >= MAX_HISTORY_LENGHT) {\n\t\t\tfor (let i = 1; i < MAX_HISTORY_LENGHT; i++) {\n\t\t\t\tnewHistory = [...newHistory, stateHistory[i]];\n\t\t\t}\n\t\t\tnewHistory = [...newHistory, { state: state, dateChange: dateOfChange }];\n\t\t} else newHistory = [...stateHistory, { state: state, dateChange: dateOfChange }];\n\n\t\tstateHistory = newHistory;\n\n\t\tsetState((prev) => ({\n\t\t\t...prev,\n\t\t\tcurrentState: newHistory.length - 1,\n\t\t}));\n\t};\n\n\tconst moveToPrevState = () => {\n\t\tif (state.currentState <= 0) return;\n\n\t\tconst current = state.currentState;\n\n\t\tsetState({ ...stateHistory[current - 1].state, currentState: current - 1 });\n\t};\n\n\tconst moveToNextState = () => {\n\t\tif (state.currentState >= MAX_HISTORY_LENGHT || stateHistory[state.currentState + 1] === undefined) return;\n\n\t\tconst current = state.currentState;\n\n\t\tsetState({ ...stateHistory[current + 1].state, currentState: current + 1 });\n\t};\n\n\tconst resetApp = () => {\n\t\tsetState(initialState);\n\n\t\tstateHistory = [];\n\n\t\tfetchData();\n\t};\n\n\tuseEffect(() => {\n\t\tfetchData();\n\t}, []);\n\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t{(state.isFetchLoading && <Loader />) || (state.isFetchError.length && <h1>{state.isFetchError}</h1>) || (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<section className=\"content\">\n\t\t\t\t\t\t<div className=\"data-list island card\">\n\t\t\t\t\t\t\t<h1>Список данных</h1>\n\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\tmultiple\n\t\t\t\t\t\t\t\tname=\"data\"\n\t\t\t\t\t\t\t\tid=\"data\"\n\t\t\t\t\t\t\t\tclassName=\"data-list__selector\"\n\t\t\t\t\t\t\t\tsize=\"10\"\n\t\t\t\t\t\t\t\tvalue={filter(state.selectedItems, (v, _, a) => includes(a, v))}\n\t\t\t\t\t\t\t\tonChange={handleSelect}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{map(state.dataList, (v, i) => (\n\t\t\t\t\t\t\t\t\t<option key={i} value={v}>{`${v}`}</option>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<SelectsView selects={state.selectedItems} />\n\t\t\t\t\t</section>\n\t\t\t\t\t<section className=\"controls\">\n\t\t\t\t\t\t<div className=\"history island card\">\n\t\t\t\t\t\t\t<h1>Последние 10 изменений</h1>\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t{map(stateHistory, (v, i) => (\n\t\t\t\t\t\t\t\t\t<li key={i} className={state.currentState === i ? 'history__item_active' : ''}>\n\t\t\t\t\t\t\t\t\t\t{v.dateChange}\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t<div className=\"control-buttons\">\n\t\t\t\t\t\t\t\t<button onClick={resetApp}>Сбросить все</button>\n\t\t\t\t\t\t\t\t<button onClick={moveToPrevState}>{'To prev'}</button>\n\t\t\t\t\t\t\t\t<button onClick={moveToNextState}>{'To next'}</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</section>\n\t\t\t\t</Fragment>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root'),\n);\n"],"sourceRoot":""}